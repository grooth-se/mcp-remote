{% extends "base.html" %}
{% from "macros/pagination.html" import render_pagination %}
{% block title %}Leverantörer - Familjekontor{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Leverantörer</h2>
    <a href="{{ url_for('invoices.new_supplier') }}" class="btn btn-primary"><i class="bi bi-plus-circle"></i> Ny leverantör</a>
</div>
<form class="mb-3" method="GET">
    <div class="input-group input-group-sm" style="max-width:400px;">
        <input type="text" name="search" class="form-control" placeholder="Sök namn eller org.nr..." value="{{ search }}">
        <button class="btn btn-outline-secondary" type="submit"><i class="bi bi-search"></i></button>
        {% if search %}<a href="{{ url_for('invoices.suppliers') }}" class="btn btn-outline-secondary">Rensa</a>{% endif %}
    </div>
</form>
<div class="table-responsive">
    <table class="table table-hover">
        <thead><tr><th>Namn</th><th>Org.nr</th><th>Standardkonto</th><th>Betvillkor</th><th>Bankgiro</th></tr></thead>
        <tbody>
            {% for s in pagination.items %}
            <tr>
                <td>{{ s.name }}</td>
                <td>{{ s.org_number or '-' }}</td>
                <td>{{ s.default_account or '-' }}</td>
                <td>{{ s.payment_terms }} dagar</td>
                <td>{{ s.bankgiro or s.plusgiro or '-' }}</td>
            </tr>
            {% else %}
            <tr><td colspan="5" class="text-center text-muted py-4">Inga leverantörer. <a href="{{ url_for('invoices.new_supplier') }}">Lägg till leverantör</a></td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{{ render_pagination(pagination, 'invoices.suppliers', search=search) }}
{% endblock %}
